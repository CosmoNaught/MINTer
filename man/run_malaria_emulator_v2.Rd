% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/emulator_main.R
\name{run_malaria_emulator_v2}
\alias{run_malaria_emulator_v2}
\title{Run Malaria Emulator V2 (Scenarios and Database)}
\usage{
run_malaria_emulator_v2(
  db_path = NULL,
  param_index = NULL,
  scenarios = NULL,
  predictor = "prevalence",
  models_base_dir = ".",
  output_dir = NULL,
  counterfactual = NULL,
  window_size = 14,
  plot_tight = FALSE,
  device = NULL,
  model_types = c("GRU", "LSTM"),
  time_steps = 2190
)
}
\arguments{
\item{db_path}{Path to DuckDB database (NULL for scenario mode)}

\item{param_index}{Parameter index (NULL for random or scenario mode)}

\item{scenarios}{Data frame with scenario parameters (used when db_path is NULL)}

\item{predictor}{"prevalence" or "cases"}

\item{models_base_dir}{Base directory with trained models}

\item{output_dir}{Directory to save outputs}

\item{counterfactual}{Named list for counterfactual analysis (only with db_path)}

\item{window_size}{Window size for rolling average}

\item{plot_tight}{Use tight y-axis scaling}

\item{device}{"cpu" or "cuda"}

\item{model_types}{Vector of model types to use ("GRU", "LSTM", or both)}

\item{time_steps}{Number of time steps for scenario predictions (in days)}
}
\value{
List with results
}
\description{
Run Malaria Emulator V2 (Scenarios and Database)
}
\examples{
\dontrun{
# Scenario mode
scenarios <- create_scenarios(
  eir = c(5.2, 35.8),
  dn0_use = c(0.15, 0.35),
  dn0_future = c(0.20, 0.45),
  Q0 = c(0.65, 0.75),
  phi_bednets = c(0.45, 0.65),
  seasonal = c(0, 1),
  routine = c(0, 0),
  itn_use = c(0.25, 0.55),
  irs_use = c(0.10, 0.35),
  itn_future = c(0.30, 0.60),
  irs_future = c(0.15, 0.40),
  lsm = c(0.05, 0.45)
)

results <- run_malaria_emulator_v2(
  scenarios = scenarios,
  predictor = 'prevalence',
  model_types = c('GRU', 'LSTM')
)
}
}
